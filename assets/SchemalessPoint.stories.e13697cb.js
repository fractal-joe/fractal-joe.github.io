import{r as h}from"./index.09b361d6.js";import{B as D,I,E as k,C as E,D as F,a as j,b as A,c as M,d as P}from"./SchemaPoint.d70fe7cd.js";import{a as d,j as i}from"./extends.eb754685.js";import{B as m,e as O,T as g,F as U,a as T}from"./Select.7ff431b6.js";import{T as b}from"./TextField.6d6e1c0d.js";import"./iframe.d91e8763.js";import"./GlobalStyles.3feb3b89.js";import"./inheritsLoose.66087489.js";import"./index.5531ed63.js";var v=Symbol("@ts-pattern/matcher"),C="@ts-pattern/anonymous-select-key",S=function(e){return Boolean(e&&typeof e=="object")},x=function(e){return e&&!!e[v]},z=function e(n,t,r){if(S(n)){if(x(n)){var o=n[v]().match(t),l=o.matched,c=o.selections;return l&&c&&Object.keys(c).forEach(function(a){return r(a,c[a])}),l}if(!S(t))return!1;if(Array.isArray(n))return!!Array.isArray(t)&&n.length===t.length&&n.every(function(a,u){return e(a,t[u],r)});if(n instanceof Map)return t instanceof Map&&Array.from(n.keys()).every(function(a){return e(n.get(a),t.get(a),r)});if(n instanceof Set){if(!(t instanceof Set))return!1;if(n.size===0)return t.size===0;if(n.size===1){var s=Array.from(n.values())[0];return x(s)?Array.from(t.values()).every(function(a){return e(s,a,r)}):t.has(s)}return Array.from(n.values()).every(function(a){return t.has(a)})}return Object.keys(n).every(function(a){var u,f=n[a];return(a in t||x(u=f)&&u[v]().matcherType==="optional")&&e(f,t[a],r)})}return Object.is(t,n)};function y(e){var n;return(n={})[v]=function(){return{match:function(t){return{matched:Boolean(e(t))}}}},n}y(function(e){return!0});y(function(e){return typeof e=="string"});y(function(e){return typeof e=="number"});y(function(e){return typeof e=="boolean"});y(function(e){return typeof e=="bigint"});y(function(e){return typeof e=="symbol"});y(function(e){return e==null});function W(e){return new _(e,[])}var _=function(){function e(t,r){this.value=void 0,this.cases=void 0,this.value=t,this.cases=r}var n=e.prototype;return n.with=function(){var t=[].slice.call(arguments),r=t[t.length-1],o=[t[0]],l=[];return t.length===3&&typeof t[1]=="function"?(o.push(t[0]),l.push(t[1])):t.length>2&&o.push.apply(o,t.slice(1,t.length-1)),new e(this.value,this.cases.concat([{match:function(c){var s={},a=Boolean(o.some(function(u){return z(u,c,function(f,p){s[f]=p})})&&l.every(function(u){return u(c)}));return{matched:a,value:a&&Object.keys(s).length?C in s?s[C]:s:c}},handler:r}]))},n.when=function(t,r){return new e(this.value,this.cases.concat([{match:function(o){return{matched:Boolean(t(o)),value:o}},handler:r}]))},n.otherwise=function(t){return new e(this.value,this.cases.concat([{match:function(r){return{matched:!0,value:r}},handler:t}])).run()},n.exhaustive=function(){return this.run()},n.run=function(){for(var t=this.value,r=void 0,o=0;o<this.cases.length;o++){var l=this.cases[o],c=l.match(this.value);if(c.matched){t=c.value,r=l.handler;break}}if(!r){var s;try{s=JSON.stringify(this.value)}catch{s=this.value}throw new Error("Pattern matching error: no pattern matches value "+s)}return r(t,this.value)},e}();const q=["Indicator","Float","PointEnum","Widget"];function w({topic:e,displayType:n,float:t,unit:r}){const o=O();return d(E,{style:{width:300,display:"flex",padding:15,alignItems:"center",justifyContent:"space-between"},children:[i(g,{style:{fontFamily:"monospace"},children:e}),d(m,{style:{display:"flex"},children:[W(n).with("Float",()=>i(g,{variant:"body1",children:t})).with("Indicator",()=>i(m,{style:{background:Math.random()>.5?o.palette.success.main:o.palette.error.main,height:16,width:16,borderRadius:"50%"}})).otherwise(()=>`Type ${n} not supported`),i(g,{ml:1,children:r})]})]})}function J(e){const[n,t]=h.exports.useState(""),[r,o]=h.exports.useState(""),[l,c]=h.exports.useState(""),s=()=>{e.setDialog(!1)},a=()=>{e.setTopic(n),e.setUnit(r),l&&e.setDisplayType(l),e.setDialog(!1)},u=p=>{t(p.target.value)},f=p=>{o(p.target.value)};return d(F,{onClose:s,open:e.dialog,fullWidth:!0,children:[i(j,{children:"Configure Point"}),d(A,{style:{padding:30},children:[i(m,{mb:2,children:i(b,{value:n,onChange:u,autoFocus:!0,margin:"dense",label:"MQTT Topic",fullWidth:!0})}),i(U,{style:{display:"flex"},required:!0,children:d(m,{style:{display:"flex",alignItems:"center"},children:[i(m,{mr:2,style:{width:200},children:i(M,{setValue:c,options:q,label:"Display Types"})}),i(b,{value:r,onChange:f,label:"Unit"})]})})]}),d(P,{children:[i(T,{onClick:s,children:"Cancel"}),i(T,{onClick:a,children:"Save"})]})]})}function K(){const[e,n]=h.exports.useState("met/1/temperature"),[t,r]=h.exports.useState("\xB0C"),[o,l]=h.exports.useState("Float"),[c,s]=h.exports.useState(!1),[a,u]=h.exports.useState(!1),[f,p]=h.exports.useState("0.00");return h.exports.useEffect(()=>{const B=setInterval(()=>{p((Math.random()*101).toFixed(2))},1e3);return()=>clearInterval(B)},[]),d(m,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[c?i(D,{badgeContent:i(I,{onClick:()=>u(!0),children:i(k,{style:{color:"white"},fontSize:"small"})}),color:"primary",children:i(w,{unit:t,float:f,topic:e,displayType:o})}):i(w,{unit:t,float:f,topic:e,displayType:o}),i(J,{setDisplayType:l,setTopic:n,dialog:a,setUnit:r,setDialog:u})]})}const Y={title:"Example/TopicBasedPoint",component:K,tags:["docsPage"],argTypes:{}},Z={args:{}},ee=["Main"];export{Z as Main,ee as __namedExportsOrder,Y as default};
//# sourceMappingURL=SchemalessPoint.stories.e13697cb.js.map
